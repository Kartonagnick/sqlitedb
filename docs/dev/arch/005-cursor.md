
cursor  
------

Служебный вспомогательный класс.  
В этом классе инкапсулированна шаблонная магия,
которая анализирует тип получателя данных,
и в зависимости от этого типа применяет ту,
или иную стратегию получения данных от sqlite3.  

Требования к классу:  
  - [x] хэдер не должен зависить от других хэдэров библиотеки.  
  - [x] все методы класса статические.  
  - [x] все методы класса приватные.  
  - [x] класс не должен использвать мутексы.  

Основные методы класса:  
  - [x] [dFOR_(other) get(owner, dst)][0]  
  - [x] [dFOR_(lambda) get(owner, dst)][1]  
  - [x] [dFOR_(tuple) get(owner, dst)][2]  

Вспомогательные методы касса:
  - [x] [loop(owner, lambda)][3]  
  - [x] [call(owner, obj, method)][4]  
  - [x] [callimpl(owner, obj, method, index_sequence)][4]  
  - [x] [getArg(owner, index)][4]  


[0]: #Одиночное-значение   "в ответ на запрос ожидаем одно единственное значение"  
[1]: #Лямбда               "с помощью лямбды перебираем строки ответа"  
[2]: #tuple                "получаем таблицу из одной единственной строки"  
[3]: #loop                 "в цикле перебирает строки с ответами"  
[4]: #arguments            "bind аргументов sqlite3 на аргументы функции"  

<br />
<br />





Одиночное значение
------------------
Используется, когда от базы в качестве ответа ожидается одно единственное значение.  

```cpp
    template<class T>
    static dFOR_(other) get(request& owner, T&& dst);
```

- [ ] Thread-Safe.  
- [x] Может бросить исключение.  
- [ ] Если по запросу ничего нет -> сработает assert

<br />
<br />





Лямбда
------
Используется для перебора всех строк ответа в цикле.

```cpp
    template<class T>
    static dFOR_(other) get(request& owner, T&& dst);
```

- [ ] Thread-Safe.  
  - [ ] При условии, что сама лямбда тоже thread-safe.  
- [x] Может бросить исключение.  
- [ ] Если по запросу ничего нет -> ничего не происходит.  
- [ ] Если лямбда возвращает true -> нужно обработать следующую строчку.  
- [ ] Если лямбда возвращает false -> нужно остановить перебор строк.  

<br />
<br />





tuple
-----
Используется для получения одной единственной строки ответа.

```cpp
    template<class T>
    static dFOR_(tuple) get(request& owner, T&& dst)
```

- [ ] Thread-Safe.  
- [x] Может бросить исключение.  
- [ ] Если по запросу ничего нет -> ничего не происходит.  
- [ ] Количество строк в таблице ответа не должно превышать 1.  
  - [ ] Если будет больше 1 -> сработает assert  

<br />
<br />





loop
----
В цикле перебирает все строки ответа, и запускает лямбду.  
Если лямбда вернет false, значит данные больше не нужны, и цикл нужно прервать.  
Если лямбда вернет true, значит нужно продолжить цикл.  
```cpp
    template<class Lambda> 
    static size_t loop(request& owner, const Lambda& lambda)
```

<br />
<br />





arguments
---------

Здесь используется трюк, который позволяет сначала вычислить значения всех аргументов, используя api sqlite3,
а затем вызвать произвольную функцию (в нашем случае это - `operator()(args...)`),
передав в качестве аргументов просчитанные раннее значения.  

